{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["const formEl = document.querySelector('.work-form');\nconst emailEl = document.querySelector('.work-form input[name=email]');\nconst commentsEl = document.querySelector('.work-form input[name=comment]');\nconst succesEl = document.querySelector('.work-form-succes');\nconst invalidEl = document.querySelector('.work-form-invalid');\n\nsuccesEl.style.display = 'none';\ninvalidEl.style.display = 'none';\n\nconst BASE_URL = 'https://portfolio-js.b.goit.study/api/requests';\nconst localKey = 'work-form-state';\nlet formDataEl = {};\n\nfillFormFields();\n\nformEl.addEventListener('input', event => {\n  formDataEl[event.target.name] = event.target.value;\n  localStorage.setItem(localKey, JSON.stringify(formDataEl));\n\n  if (emailEl.validity.valid) {\n    succesEl.style.display = 'block';\n    invalidEl.style.display = 'none';\n  } else {\n    succesEl.style.display = 'none';\n    invalidEl.style.display = 'block';\n  }\n});\n\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n  if (emailEl.value !== '' && commentsEl.value !== '') {\n    console.log(formDataEl);\n    console.log(JSON.stringify(formDataEl));\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n      },\n      body: JSON.stringify(formDataEl),\n    };\n\n    console.log(options);\n\n    fetch(BASE_URL, options)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then(post => console.log(post.title))\n      .catch(error => console.log(error));\n\n    localStorage.removeItem(localKey);\n    event.currentTarget.reset();\n    return;\n  }\n  alert('All fields must be filled!');\n});\n\nfunction fillFormFields() {\n  const saveFormFields = localStorage.getItem(localKey);\n  if (saveFormFields) {\n    formDataEl = JSON.parse(saveFormFields);\n    emailEl.value = formDataEl.email || '';\n    commentsEl.value = formDataEl.comment || '';\n  }\n}"],"names":["formEl","emailEl","commentsEl","succesEl","invalidEl","BASE_URL","localKey","formDataEl","fillFormFields","event","options","response","post","error","saveFormFields"],"mappings":"ssBAAA,MAAMA,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAU,SAAS,cAAc,8BAA8B,EAC/DC,EAAa,SAAS,cAAc,gCAAgC,EACpEC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,oBAAoB,EAE7DD,EAAS,MAAM,QAAU,OACzBC,EAAU,MAAM,QAAU,OAE1B,MAAMC,EAAW,iDACXC,EAAW,kBACjB,IAAIC,EAAa,CAAA,EAEjBC,IAEAR,EAAO,iBAAiB,QAASS,GAAS,CACxCF,EAAWE,EAAM,OAAO,IAAI,EAAIA,EAAM,OAAO,MAC7C,aAAa,QAAQH,EAAU,KAAK,UAAUC,CAAU,CAAC,EAErDN,EAAQ,SAAS,OACnBE,EAAS,MAAM,QAAU,QACzBC,EAAU,MAAM,QAAU,SAE1BD,EAAS,MAAM,QAAU,OACzBC,EAAU,MAAM,QAAU,QAE9B,CAAC,EAEDJ,EAAO,iBAAiB,SAAUS,GAAS,CAEzC,GADAA,EAAM,eAAc,EAChBR,EAAQ,QAAU,IAAMC,EAAW,QAAU,GAAI,CACnD,QAAQ,IAAIK,CAAU,EACtB,QAAQ,IAAI,KAAK,UAAUA,CAAU,CAAC,EAEtC,MAAMG,EAAU,CACd,OAAQ,OACR,QAAS,CACP,eAAgB,iCACjB,EACD,KAAM,KAAK,UAAUH,CAAU,CACrC,EAEI,QAAQ,IAAIG,CAAO,EAEnB,MAAML,EAAUK,CAAO,EACpB,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQ,QAAQ,IAAIA,EAAK,KAAK,CAAC,EACpC,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EAEpC,aAAa,WAAWP,CAAQ,EAChCG,EAAM,cAAc,QACpB,MACD,CACD,MAAM,4BAA4B,CACpC,CAAC,EAED,SAASD,GAAiB,CACxB,MAAMM,EAAiB,aAAa,QAAQR,CAAQ,EAChDQ,IACFP,EAAa,KAAK,MAAMO,CAAc,EACtCb,EAAQ,MAAQM,EAAW,OAAS,GACpCL,EAAW,MAAQK,EAAW,SAAW,GAE7C"}